{"version":3,"file":"bundle.min.js","sources":["../src/index.ts"],"sourcesContent":["/*\n web-component-decorator 1.1.1\n @copyright 2020 Edwin Martin\n @license MIT\n */\n\nconst attrSymbol = Symbol();\n\nexport function define(\n  name: string,\n  options?: ElementDefinitionOptions\n): (constructor: CustomElementConstructor) => void {\n  return (constructor: CustomElementConstructor) => {\n    customElements.define(name, constructor, options);\n  };\n}\n\nexport function attribute(attr: string) {\n  return function (\n    target: CustomElement,\n    propertyName: string,\n    propertyDescriptor: PropertyDescriptor\n  ): PropertyDescriptor {\n    const prop = propertyDescriptor.value ? \"value\" : \"set\";\n\n    const constructor =\n      target.constructor as unknown as CustomElementConstructorType;\n\n    if (constructor[attrSymbol]) {\n      constructor.observedAttributes.push(attr);\n      constructor[attrSymbol].set(attr, propertyDescriptor[prop]);\n    } else {\n      constructor.observedAttributes = [attr];\n      constructor[attrSymbol] = new Map([[attr, propertyDescriptor[prop]]]);\n    }\n\n    target.attributeChangedCallback = function (attr, oldValue, newValue) {\n      constructor[attrSymbol].get(attr).call(this, newValue, oldValue);\n    };\n\n    return propertyDescriptor;\n  };\n}\n\nexport interface CustomElement {\n  constructor: Function;\n\n  attributeChangedCallback?(\n    attributeName: string,\n    oldValue: string,\n    newValue: string\n  ): void;\n\n  connectedCallback?(): void;\n\n  disconnectedCallback?(): void;\n}\n\nexport type CustomElementConstructorType = Function & {\n  [index: symbol]: Map<string, any>;\n  observedAttributes: string[];\n};\n"],"names":["attrSymbol","Symbol","define","name","options","constructor","customElements","attribute","attr","target","propertyName","propertyDescriptor","prop","value","observedAttributes","push","set","Map","attributeChangedCallback","oldValue","newValue","get","call","this"],"mappings":";;;;;AAMA,MAAMA,EAAaC,SAEH,SAAAC,EACdC,EACAC,GAEA,OAAQC,IACNC,eAAeJ,OAAOC,EAAME,EAAaD,EAAQ,CAErD,CAEM,SAAUG,EAAUC,GACxB,OAAO,SACLC,EACAC,EACAC,GAEA,MAAMC,EAAOD,EAAmBE,MAAQ,QAAU,MAE5CR,EACJI,EAAOJ,YAcT,OAZIA,EAAYL,IACdK,EAAYS,mBAAmBC,KAAKP,GACpCH,EAAYL,GAAYgB,IAAIR,EAAMG,EAAmBC,MAErDP,EAAYS,mBAAqB,CAACN,GAClCH,EAAYL,GAAc,IAAIiB,IAAI,CAAC,CAACT,EAAMG,EAAmBC,OAG/DH,EAAOS,yBAA2B,SAAUV,EAAMW,EAAUC,GAC1Df,EAAYL,GAAYqB,IAAIb,GAAMc,KAAKC,KAAMH,EAAUD,EACzD,EAEOR,CACT,CACF"}