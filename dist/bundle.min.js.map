{"version":3,"file":"bundle.min.js","sources":["../src/index.ts"],"sourcesContent":["/*\n web-component-decorator\n @copyright 2020 Edwin Martin\n @license MIT\n */\n\nconst attrSymbol = Symbol();\n\nexport function define(name: string, options?: ElementDefinitionOptions): (constructor: CustomElementConstructor) => void {\n  return (constructor: CustomElementConstructor) => {\n    customElements.define(name, constructor, options);\n  };\n}\n\nexport function attribute(attr: string) {\n  return function(\n    target: CustomElement,\n    propertyName: string,\n    propertyDescriptor: PropertyDescriptor,\n  ): PropertyDescriptor {\n    const prop = propertyDescriptor.value ? \"value\" : \"set\";\n\n    if (target.constructor[attrSymbol]) {\n      target.constructor.observedAttributes.push(attr);\n      target.constructor[attrSymbol].set(attr, propertyDescriptor[prop]);\n    } else {\n      target.constructor.observedAttributes = [attr];\n      target.constructor[attrSymbol] = new Map([\n        [attr, propertyDescriptor[prop]],\n      ]);\n    }\n\n    target.attributeChangedCallback = function(attr, oldValue, newValue) {\n      target.constructor[attrSymbol].get(attr).call(this, newValue, oldValue);\n    };\n\n    return propertyDescriptor;\n  };\n}\n\nexport interface CustomElement {\n  constructor: Function & {\n    observedAttributes?: string[];\n  };\n\n  attributeChangedCallback?(\n    attributeName: string,\n    oldValue: string,\n    newValue: string,\n  ): void;\n\n  connectedCallback?(): void;\n\n  disconnectedCallback?(): void;\n}\n"],"names":["attrSymbol","Symbol","define","name","options","constructor","customElements","attribute","attr","target","propertyName","propertyDescriptor","prop","value","observedAttributes","push","set","Map","attributeChangedCallback","oldValue","newValue","get","call","this"],"mappings":";;;;;AAMA,MAAMA,EAAaC,kBAEHC,EAAOC,EAAcC,GACnC,OAAQC,IACNC,eAAeJ,OAAOC,EAAME,EAAaD,aAI7BG,EAAUC,GACxB,OAAO,SACLC,EACAC,EACAC,GAEA,MAAMC,EAAOD,EAAmBE,MAAQ,QAAU,MAgBlD,OAdIJ,EAAOJ,YAAYL,IACrBS,EAAOJ,YAAYS,mBAAmBC,KAAKP,GAC3CC,EAAOJ,YAAYL,GAAYgB,IAAIR,EAAMG,EAAmBC,MAE5DH,EAAOJ,YAAYS,mBAAqB,CAACN,GACzCC,EAAOJ,YAAYL,GAAc,IAAIiB,IAAI,CACvC,CAACT,EAAMG,EAAmBC,OAI9BH,EAAOS,yBAA2B,SAASV,EAAMW,EAAUC,GACzDX,EAAOJ,YAAYL,GAAYqB,IAAIb,GAAMc,KAAKC,KAAMH,EAAUD,IAGzDR"}